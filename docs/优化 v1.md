## 前端
上传异步，提交上传任务后，在前端进行排队，等上一个任务完成后再提交下一个任务。
思考：这样用户关闭浏览器后，未提交的任务就会消失，看看是否存储在浏览器中 或者 提交到后端进行排队。

## 后端

### 大文件缓存

由于没有编辑功能，直接缓存大文件和热点数据在 Redis 缓存中

### 无引用副本清除

为保证用户数据隔离使用`json_files`表的`ref_count`字段进行引用计数，当该字段为0代表无用户引用标识为待删除。由定时任务定时清理。

### ref_count 的计算

问题分析

1. 假设两个事务同时读取和更新文件的引用计数：
2. 事务A读取文件F的ref_count为5
3. 事务B同时读取文件F的ref_count也为5
4. 事务A将ref_count加1并更新为6
5. 事务B也将ref_count加1并更新为6
6. 最终ref_count为6，但实际应该是7（丢失了一次更新）

加锁: 读取 ref_count 并加一的操作加锁；更新同理

原子更新：不涉及读取